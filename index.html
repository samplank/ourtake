<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<meta name="google-signin-client_id" content="130022120774-65r3j5ausqf2q02ng7ac4moe335oboh5.apps.googleusercontent.com">
<script type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="js/frontpage.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<link rel="stylesheet" type="text/css" href="ourtake.css">
<link rel="shortcut icon" href="#" />
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>

<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>


<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAOCrsdOewIQmGh0XDS1wYGqTbrJKGVwY0",
    authDomain: "ourtake-9cc32.firebaseapp.com",
    databaseURL: "https://ourtake-9cc32.firebaseio.com",
    projectId: "ourtake-9cc32",
    storageBucket: "ourtake-9cc32.appspot.com",
    messagingSenderId: "130022120774"
  };
  firebase.initializeApp(config);

  console.log(firebase.name);

  // Get a reference to the database service
  var database = firebase.database();

</script>

<script src="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.css" />
</head>

<body>

<a href="https://samplank.github.io/ourtake" style="text-decoration: none; color:black"><h2>OurTake</h2></a>


<div class="topright">
  <!-- <div class="g-signin2" data-onsuccess="onSignIn" id="googlesignin"></div>
  <a href="#" id="signout" onclick="signOut();" style="text-decoration: none";>Sign out</a> -->
  <!-- <a href='email-password.html'>sign in</a> -->
  <div id="firebaseui-auth-container"></div>
<div id="loader">Loading...</div>
</div>

<div id="existingArticle">
</div>

<div id="addArticle">
</div>



<!-- <script type="text/javascript">
  var name = '';
  function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    name = String(profile.getName());
    addButton(name);
}
</script> -->

<!-- <script>
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
    location.reload(true);
  }
</script> -->

<script>

var ui = new firebaseui.auth.AuthUI(firebase.auth());

ui.start('#firebaseui-auth-container', {
  signInOptions: [
    // List of OAuth providers supported.
    firebase.auth.GoogleAuthProvider.PROVIDER_ID

  ],
  // Other config options...
});

// firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
//   // Handle Errors here.
//   var errorCode = error.code;
//   var errorMessage = error.message;
//   // ...
// });

// firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
//   // Handle Errors here.
//   var errorCode = error.code;
//   var errorMessage = error.message;
//   // ...
// });

firebase.auth().onAuthStateChanged(function(user) {
  loadArticles()
  if (user) {
    // User is signed in.
    var displayName = user.displayName;
    addButton(displayName);
    // ...
  } else {
    // User is signed out.
    // ...
  }
});

firebase.auth().signOut().then(function() {
  // Sign-out successful.
}).catch(function(error) {
  // An error happened.
});

var uiConfig = {
  callbacks: {
    signInSuccessWithAuthResult: function(authResult, redirectUrl) {
      // User successfully signed in.
      // Return type determines whether we continue the redirect automatically
      // or whether we leave that to developer to handle.
      return true;
    },
    uiShown: function() {
      // The widget is rendered.
      // Hide the loader.
      document.getElementById('loader').style.display = 'none';
    }
  },
  // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
  signInFlow: 'popup',
  signInSuccessUrl: 'https://samplank.github.io/ourtake',
  signInOptions: [
    // Leave the lines as is for the providers you want to offer your users.
    firebase.auth.GoogleAuthProvider.PROVIDER_ID
  ],
  // Terms of service url.
  tosUrl: 'https://samplank.github.io/ourtake'
};

// The start method will wait until the DOM is loaded.
ui.start('#firebaseui-auth-container', uiConfig);

</script>

<script>
  loadArticles();
</script>


</body>
</html>
