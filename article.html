<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<meta name="google-signin-client_id" content="130022120774-65r3j5ausqf2q02ng7ac4moe335oboh5.apps.googleusercontent.com">
<script type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="js/article.js"></script>
<script src="https://apis.google.com/js/api.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<link rel="stylesheet" type="text/css" href="ourtake.css">
<link rel="shortcut icon" href="#" />
</head>
<body>

<a href="https://samplank.github.io/ourtake" style="text-decoration: none; color:black"><h2>OurTake</h2></a>

<div class="topright">
  <a href='email-password.html'>sign in</a>
  <!-- <div class="g-signin2" data-onsuccess="onSignIn" id="googlesignin"></div>
  <a href="#" id="signout" onclick="signOut();" style="text-decoration: none";>Sign out</a> -->
</div>

<div class="tab">
  <button class="tablinks" onclick="openTab(event, 'Read')" id="defaultOpen">Read</button>
  <button class="tablinks" onclick="openTab(event, 'Review')">Review</button>
  <button class="tablinks" onclick="openTab(event, 'Contribute')">Contribute</button>
</div>

<div id="Read" class="tabcontent">
  <h3>Read</h3>
  <div id="ReadText"></div>
</div>

<div id="Review" class="tabcontent">
  <h3>Review</h3>
  <p id="ReviewText"></p>
</div>

<div id="Contribute" class="tabcontent">
  <h3>Contribute</h3>
  <p id="ContributeText"></p>
</div>

<!-- <button type="button">Click Me!</button>
<div id="edit" contenteditable="true">
Here is the element's original content
</div> -->

<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAOCrsdOewIQmGh0XDS1wYGqTbrJKGVwY0",
    authDomain: "ourtake-9cc32.firebaseapp.com",
    databaseURL: "https://ourtake-9cc32.firebaseio.com",
    projectId: "ourtake-9cc32",
    storageBucket: "ourtake-9cc32.appspot.com",
    messagingSenderId: "130022120774"
  };
  firebase.initializeApp(config);

  // Get a reference to the database service
  var database = firebase.database();

</script>

<script>
var user = firebase.auth().currentUser;

if (user) {
  console.log(user);
} else {
  console.log("no user signed in");
}
</script>

<script>
var myname = '';
</script>
<script>
function start() {
  // 2. Initialize the JavaScript client library.
  gapi.client.init({
    'apiKey': 'AIzaSyA_qipIVb3FK8v56oBUwSd2e2Hdmz7XJOg',
    // Your API key will be automatically added to the Discovery Document URLs.
    'discoveryDocs': ['https://people.googleapis.com/$discovery/rest'],
    // clientId and scope are optional if auth is not required.
    'clientId': '130022120774-65r3j5ausqf2q02ng7ac4moe335oboh5.apps.googleusercontent.com',
    'scope': 'profile',
  }).then(function() {
    // 3. Initialize and make the API request.
    return gapi.client.people.people.get({
      'resourceName': 'people/me',
      'requestMask.includeField': 'person.names'
    });
  }).then(function(response) {
    myname = response.result["names"][0]["displayName"];
    getName(myname);
  }, function(reason) {
    console.log('Error: ' + reason.result.error.message);
  });
};
// 1. Load the JavaScript client library.
gapi.load('client', start);

</script>

<script>
  var url_string = document.location.href;
  var url = new URL(url_string);
  var article = url.searchParams.get("article");
  loadText(article);
</script>

<script>
  document.getElementById("defaultOpen").click();
</script>

<script type="text/javascript">
  var name = '';
  function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
    console.log('Name: ' + profile.getName());
    console.log('Image URL: ' + profile.getImageUrl());
    console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
    name = String(profile.getName());
    loadText(article);
}
</script>

<script>
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
      location.reload(true);
    });
  }
</script>

</body>
</html>